apiVersion: 1

# Contact points for CDC alerting
# Note: External services (Slack, PagerDuty) are configured with placeholders
# for development. Set environment variables for production use.

contactPoints:
  # Default webhook contact point for development (always works)
  - orgId: 1
    name: default-webhook
    receivers:
      - uid: default-webhook-receiver
        type: webhook
        settings:
          url: "http://localhost:9999/alerts"
          httpMethod: POST
          maxAlerts: 100

  # Slack integration - requires SLACK_WEBHOOK_URL environment variable
  # To enable: export SLACK_WEBHOOK_URL="https://hooks.slack.com/services/xxx"
  # - orgId: 1
  #   name: slack-platform
  #   receivers:
  #     - uid: slack-platform-channel
  #       type: slack
  #       settings:
  #         url: "${SLACK_WEBHOOK_URL}"
  #         recipient: "#platform-alerts"
  #         title: |
  #           {{ if eq .Status "firing" }}:fire:{{ else }}:white_check_mark:{{ end }} {{ .CommonAnnotations.summary }}
  #         text: |
  #           {{ range .Alerts }}
  #           *Alert:* {{ .Annotations.summary }}
  #           *Severity:* {{ .Labels.severity }}
  #           *Description:* {{ .Annotations.description }}
  #           {{ if .Annotations.runbook_url }}*Runbook:* {{ .Annotations.runbook_url }}{{ end }}
  #           {{ end }}
  #       disableResolveMessage: false

  # PagerDuty integration - requires PAGERDUTY_INTEGRATION_KEY environment variable
  # To enable: export PAGERDUTY_INTEGRATION_KEY="your-key"
  # - orgId: 1
  #   name: pagerduty-critical
  #   receivers:
  #     - uid: pagerduty-platform
  #       type: pagerduty
  #       settings:
  #         integrationKey: "${PAGERDUTY_INTEGRATION_KEY}"
  #         severity: critical
  #         class: CDC Pipeline
  #         component: Consumer
  #         group: Platform

  # Email digest for info alerts
  # Note: Requires SMTP configuration in Grafana
  # - orgId: 1
  #   name: email-digest
  #   receivers:
  #     - uid: email-platform
  #       type: email
  #       settings:
  #         addresses: platform-team@example.com
  #         singleEmail: true
  #         message: |
  #           Alert Summary:
  #           {{ range .Alerts }}
  #           - {{ .Annotations.summary }}
  #           {{ end }}
